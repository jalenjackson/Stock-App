(this["webpackJsonpqs-coding-challenge"]=this["webpackJsonpqs-coding-challenge"]||[]).push([[0],{330:function(e){e.exports=JSON.parse('{"app.search-for-a-stock":"Search For A Stock"}')},337:function(e,t,a){e.exports=a(758)},755:function(e,t,a){},756:function(e,t,a){},757:function(e,t,a){},758:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(8),s=a.n(c),i=a(54),o=a(98),l=a(39),u="UPDATE_SEARCH_INTERNAL_STATE",d="WATCH_SEARCH_TICKER_DATA",h=Object(l.b)({searchTerm:"",searchResults:Object(l.a)(),selectedTicker:""}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var a=t.data,r=a.key,n=a.value;return e.merge(Object(o.a)({},r,Object(l.c)(n)));default:return e}},m="UPDATE_CHART_STATE",f="WATCH_GET_CHART_DATA",b="WATCH_GET_LATEST_PRICE",v=Object(l.c)({tickerData:Object(l.b)({dates:Object(l.a)(),chartData:Object(l.a)()}),dates:Object(l.a)(),latestPrice:Object(l.b)(),loadingChartData:!1,loadingLatestPrice:!1,latestPriceExceeded:!1,chartDataExceeded:!1,interval:"5min"}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var a=t.data,r=a.key,n=a.value;return e.merge(Object(o.a)({},r,Object(l.c)(n)));default:return e}},E=Object(i.c)({search:p,chart:g}),k={"en-us":a(330)},x=a(759),y=function(e){var t=e.children;return n.a.createElement(x.a,{locale:"en-us",messages:k["en-us"]},t)},S=a(331),w=a.n(S),O=a(4),C=a.n(O),D=(a(280),a(268),a(100)),j=function(e,t){return{type:m,data:{key:e,value:t}}};function T(e){return{backgroundColor:"#1D1D1E",legend:{inactiveColor:"#777",textStyle:{color:"#fff"}},tooltip:{trigger:"axis",axisPointer:{animation:!1,type:"cross",lineStyle:{color:"#35C59B",width:2,opacity:1}}},xAxis:{type:"category",data:e.dates,axisLine:{lineStyle:{color:"#8392A5"}}},yAxis:{scale:!0,axisLine:{lineStyle:{color:"#8392A5"}},splitLine:{show:!1}},grid:{bottom:80},dataZoom:[{textStyle:{color:"#8392A5"},handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",dataBackground:{areaStyle:{color:"#8392A5"},lineStyle:{opacity:.8,color:"#8392A5"}},handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}},{type:"inside"}],animation:!1,series:[{type:"candlestick",name:"Price Action",data:e.tickerData.chartData,itemStyle:{color:"#FD1050",color0:"#35C59B",borderColor:"#FD1050",borderColor0:"#35C59B"}}]}}function A(e,t){e.getChartData(e.ticker,t),e.updateChartState("interval",t)}var P=a(119),N=a.n(P);var _=function(e){return e.loadingLatestPrice?n.a.createElement("div",{className:"latest-price-wrapper"},n.a.createElement("h1",null,"-"),n.a.createElement("h2",null,"-")):e.latestPriceExceeded?n.a.createElement("div",{className:"latest-price-wrapper"},n.a.createElement("h1",null,"Failed to get price. (only 5 api calls a minute)"),n.a.createElement(N.a,{type:"primary",onClick:function(){return function(e){e.updateChartState("loadingLatestPrice",!0),e.updateChartState("latestPriceExceeded",!1),e.updateChartState("latestPrice",{}),setTimeout((function(){e.getLatestPrice(e.ticker)}),1200)}(e)}},"Try again")):e.latestPrice&&Object.keys(e.latestPrice).length>0?n.a.createElement("div",{className:"latest-price-wrapper"},n.a.createElement("h1",null,"$",e.latestPrice.price),n.a.createElement("h2",{className:e.latestPrice.change>0?"latest-price-change-color-green":"latest-price-change-color-red"},"".concat(e.latestPrice.change>0?"+":"-","$").concat(String(Math.round(100*e.latestPrice.change)/100).substring(1)))):n.a.createElement("div",{className:"latest-price-wrapper"},n.a.createElement("h1",null,"-"),n.a.createElement("h1",null,"-"))};C.a.registerTheme("my_theme",{backgroundColor:"#f4cccc"});var L=Object(D.b)((function(e){return{tickerData:e.chart.get("tickerData").toJS(),latestPrice:e.chart.get("latestPrice").toJS(),loadingChartData:e.chart.get("loadingChartData"),latestPriceExceeded:e.chart.get("latestPriceExceeded"),chartDataExceeded:e.chart.get("chartDataExceeded"),dates:e.chart.get("dates").toJS(),interval:e.chart.get("interval")}}),{getChartData:function(e,t,a,r){return{type:f,data:{ticker:e,interval:t,showNotification:a,tickerData:r}}},getLatestPrice:function(e){return{type:b,ticker:e}},updateChartState:j})((function(e){return Object(r.useEffect)((function(){e.getChartData(e.ticker,"5min",!0,e.tickerData),e.getLatestPrice(e.ticker);var t=setInterval((function(){e.getLatestPrice(e.ticker)}),2e4);return function(){clearInterval(t)}}),[e.ticker]),n.a.createElement("div",null,n.a.createElement("h1",{className:"ticker"},e.ticker.toUpperCase()),n.a.createElement(_,e),n.a.createElement("div",{style:{height:"50vh"},className:"chart-wrapper"},n.a.createElement(w.a,{echarts:C.a,option:T(e),notMerge:!0,lazyUpdate:!0,theme:"my_theme",style:{minHeight:"100%"},loadingOption:{text:"",color:"#35C59B",textColor:"white",maskColor:"rgba(0,0,0, 0)",zlevel:0},showLoading:e.loadingChartData}),e.chartDataExceeded?n.a.createElement("div",{className:"chart-container"},n.a.createElement("div",{className:"chart-overlay"},n.a.createElement("h1",null,"Couldn't render chart. Only 5 API calls a minute max."),n.a.createElement(N.a,{className:"try-fetching-chart-btn",type:"primary",onClick:function(){return function(e){e.updateChartState("chartDataExceeded",!1),e.updateChartState("loadingChartData",!0),setTimeout((function(){e.getChartData(e.ticker,"5min",!1)}),1200)}(e)}},"Try Again"))):null),n.a.createElement("div",{className:"interval-wrapper"},n.a.createElement("a",{className:"5min"===e.interval?"interval-chosen":"",onClick:function(){return A(e,"5min")}},"5min"),n.a.createElement("a",{className:"1W"===e.interval?"interval-chosen":"",onClick:function(){return A(e,"1W")}},"1W"),n.a.createElement("a",{className:"1M"===e.interval?"interval-chosen":"",onClick:function(){return A(e,"1M")}},"1M"),n.a.createElement("a",{className:"1Y"===e.interval?"interval-chosen":"",onClick:function(){return A(e,"1Y")}},"1Y")))}));var z=function(){return n.a.createElement("div",null,n.a.createElement(L,{ticker:"AAPL"}))},I=a(210),M=a.n(I),R=a(207),B=a.n(R),H=a(66),F=a.n(H),W=new x.a({locale:"en-us",messages:k["en-us"],defaultLocale:"en-us",onError:function(e){return console.error(e)}}).state.intl.formatMessage,Y=function(e,t){return{type:u,data:{key:e,value:t}}},J=a(68),q=M.a.Option;var G=Object(J.f)(Object(D.b)((function(e){return{searchTerm:e.search.get("searchTerm"),searchResults:e.search.get("searchResults").toJS()}}),{updateSearchState:Y,searchStock:function(e){return{type:d,term:e}}})((function(e){var t=e.searchResults.map((function(e){return n.a.createElement(q,{key:e["1. symbol"],value:e["1. symbol"]},n.a.createElement("span",null,e["1. symbol"]),n.a.createElement("span",{className:"stock-search-name"},e["2. name"]))}));return n.a.createElement("div",{className:"stock-search-container"},n.a.createElement(M.a,{className:"stock-search",dropdownClassName:"stock-search-dropdown",dropdownMatchSelectWidth:!1,onSearch:function(t){e.searchStock(t)},onSelect:function(t){e.history.push("/stocks/".concat(t))},size:"large",style:{width:"100%"},dataSource:t,placeholder:W({id:"app.search-for-a-stock"}),optionLabelProp:"value"},n.a.createElement(B.a,{placeholder:"Search For A Stock eg. Microsoft",suffix:n.a.createElement(F.a,{style:{color:"#35C59B"},type:"search",className:"stock-search-icon"})})))}))),U=a(44),Q=a.n(U);var V=Object(J.f)((function(e){return console.log(Q.a.get(e,"match.params.stock")),n.a.createElement("div",null,n.a.createElement(L,{ticker:Q.a.get(e,"match.params.stock")}))})),$=a(334),K=a(20),X=a.n(K),Z=a(14),ee=function(e){return"https://www.alphavantage.co/query?function=".concat(e,"&apikey=RXG32M4MQSBNDZKB")},te=a(99),ae=a.n(te),re=X.a.mark(se),ne=X.a.mark(ie),ce=X.a.mark(oe);function se(e){var t,a;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={url:"".concat(ee("SYMBOL_SEARCH"),"&keywords=").concat(e),method:"get"},r.prev=1,r.next=4,ae.a.request(t);case 4:return a=r.sent,r.abrupt("return",Q.a.get(a,"data.bestMatches"));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",!1);case 11:case"end":return r.stop()}}),re,null,[[1,8]])}function ie(e){var t,a;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.term,r.next=3,Object(Z.d)(Y("searchTerm",t));case 3:return r.next=5,Object(Z.b)(se,t);case 5:if(a=r.sent){r.next=8;break}return r.abrupt("return");case 8:if(!(a.length>0)){r.next=11;break}return r.next=11,Object(Z.d)(Y("searchResults",a));case 11:case"end":return r.stop()}}),ne)}function oe(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.c)(500,d,ie);case 2:case"end":return e.stop()}}),ce)}var le=oe,ue=X.a.mark(pe),de=X.a.mark(me),he=X.a.mark(fe);function pe(e,t,a){var r,n;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={url:"".concat(ee(a.method),"&symbol=").concat(e),method:"get"},a.interval&&(r.url+="&interval=".concat(a.interval)),a.outputSizeFull&&(r.url+="&outputsize=full"),t.prev=3,t.next=6,ae.a.request(r);case 6:if(n=t.sent,!Q.a.get(n,"data.Note")){t.next=11;break}return t.abrupt("return","exceeded");case 11:return t.abrupt("return",Q.a.get(n,"data.".concat(a.target)));case 12:t.next=17;break;case 14:return t.prev=14,t.t0=t.catch(3),t.abrupt("return",{});case 17:case"end":return t.stop()}}),ue,null,[[3,14]])}function me(e){var t,a,r,n,c,s,i,o;return X.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.data,l.next=3,Object(Z.d)(j("loadingChartData",!0));case 3:return l.next=5,Object(Z.d)(j("chartDataExceeded",!1));case 5:a=t.ticker,r=t.interval,n={method:"TIME_SERIES_INTRADAY",interval:"5min",outputSizeFull:!1,size:!1,target:"Time Series (5min)"},l.t0=r,l.next="5min"===l.t0?10:"1W"===l.t0?11:"1M"===l.t0?13:"1Y"===l.t0?15:17;break;case 10:return l.abrupt("break",18);case 11:return n={method:"TIME_SERIES_INTRADAY",interval:"60min",outputSizeFull:!0,size:49,target:"Time Series (60min)"},l.abrupt("break",18);case 13:return n={method:"TIME_SERIES_DAILY",interval:!1,outputSizeFull:!0,size:22,target:"Time Series (Daily)"},l.abrupt("break",18);case 15:return n={method:"TIME_SERIES_DAILY",interval:!1,outputSizeFull:!0,size:253,target:"Time Series (Daily)"},l.abrupt("break",18);case 17:return l.abrupt("break",18);case 18:return l.next=20,Object(Z.b)(pe,a,r,n);case 20:if("exceeded"!==(c=l.sent)){l.next=27;break}return l.next=24,Object(Z.d)(j("chartDataExceeded",!0));case 24:return l.abrupt("return");case 27:return l.next=29,Object(Z.d)(j("chartDataExceeded",!1));case 29:for(i in s={chartData:[],dates:[]},c)o=c[i],s.dates.push(i),s.chartData.push([o["1. open"],o["4. close"],o["3. low"],o["2. high"]]);return s.dates=s.dates.reverse(),s.chartData=s.chartData.reverse(),n.size&&(s.chartData=s.chartData.slice(s.chartData.length-n.size),s.dates=s.dates.slice(s.dates.length-n.size)),l.next=36,Object(Z.d)(j("loadingChartData",!1));case 36:return l.next=38,Object(Z.d)(j("dates",s.dates));case 38:return l.next=40,Object(Z.d)(j("tickerData",s));case 40:return l.abrupt("return",l.sent);case 41:case"end":return l.stop()}}),de)}function fe(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.f)(f,me);case 2:case"end":return e.stop()}}),he)}var be=fe,ve=X.a.mark(ke),ge=X.a.mark(xe),Ee=X.a.mark(ye);function ke(e){var t,a,r;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t={url:"".concat(ee("GLOBAL_QUOTE"),"&symbol=").concat(e),method:"get"},n.next=4,ae.a.request(t);case 4:if(a=n.sent,!Q.a.get(a,"data.Note")){n.next=9;break}return n.abrupt("return","exceeded");case 9:if(!(r=Q.a.get(a,"data.Global Quote"))){n.next=12;break}return n.abrupt("return",{price:r["05. price"],change:r["05. price"]-r["08. previous close"]});case 12:n.next=17;break;case 14:return n.prev=14,n.t0=n.catch(0),n.abrupt("return",{});case 17:case"end":return n.stop()}}),ve,null,[[0,14]])}function xe(e){var t,a;return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.ticker,r.next=3,Object(Z.d)(j("loadingLatestPrice",!0));case 3:return r.next=5,Object(Z.d)(j("latestPriceExceeded",!1));case 5:return r.next=7,Object(Z.b)(ke,t);case 7:return a=r.sent,r.next=10,Object(Z.d)(j("loadingLatestPrice",!1));case 10:if("exceeded"!==a){r.next=16;break}return r.next=13,Object(Z.d)(j("latestPriceExceeded",!0));case 13:return r.abrupt("return",r.sent);case 16:return r.next=18,Object(Z.d)(j("latestPriceExceeded",!1));case 18:if(!a){r.next=22;break}return r.next=21,Object(Z.d)(j("latestPrice",a));case 21:return r.abrupt("return",r.sent);case 22:case"end":return r.stop()}}),ge)}function ye(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.f)(b,xe);case 2:case"end":return e.stop()}}),Ee)}var Se=ye,we=X.a.mark(Oe);function Oe(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)([Object(Z.e)(le),Object(Z.e)(be),Object(Z.e)(Se)]);case 2:case"end":return e.stop()}}),we)}var Ce=Oe,De=a(148),je=Object($.a)(),Te=Object(i.e)(E,Object(i.a)(je));je.run(Ce);var Ae=function(){return n.a.createElement(D.a,{store:Te},n.a.createElement(y,null,n.a.createElement(De.a,null,n.a.createElement(J.c,null,n.a.createElement("div",{className:"main-wrapper"},n.a.createElement(G,null),n.a.createElement(J.a,{exact:!0,path:"/",component:z}),n.a.createElement(J.a,{exact:!0,path:"/stocks/:stock",component:V}))))))};a(755),a(756),a(757),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[337,1,2]]]);
//# sourceMappingURL=main.9922ca8e.chunk.js.map